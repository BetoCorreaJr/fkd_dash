<section id="content" ng-init="setState('administrativo-menu', 'administrativo-gerenciar-estabelecimento'); onLoad(); adminOnLoad()">
  <div class="container">
    <div class="row">
      <div class="col s12">
        <div class="card">
          <nav class="yellow darken-2">
            <div class="nav-wrapper">
              <div class="col s12">
                <a class="breadcrumb black-text">Gerenciar Estabelecimentos</a>
              </div>
            </div>
          </nav>
          <div class="card-content">
            <div>
              <table class="highlight">
                <thead>
                  <tr>
                    <th>id</th>
                    <th>Nome</th>
                    <th>Segmento</th>
                    <th>Bairro</th>
                    <th class="center"><!-- Info --></th>
                    <th class="center"><!-- Remover --></th>
                  </tr>
                </thead>

                <tbody>
                  <tr ng-repeat="e in estabelecimentosList | orderBy: 'id_estabelecimento'">
                    <td ng-if="e.ativo">{{e.id_estabelecimento}}</td>
                    <td ng-if="e.ativo">{{e.nome}}</td>
                    <td ng-if="e.ativo">{{e.segmento}}</td>
                    <td ng-if="e.ativo">{{e.bairro}}</td>
                    <td ng-if="!e.ativo" class="grey-text">{{e.id_estabelecimento}}</td>
                    <td ng-if="!e.ativo" class="grey-text">{{e.nome}}</td>
                    <td ng-if="!e.ativo" class="grey-text">{{e.segmento}}</td>
                    <td ng-if="!e.ativo" class="grey-text">{{e.bairro}}</td>
                    <td class="center" ng-if="e.ativo"><i tooltipped data-position="top" data-delay="150" data-tooltip="Mais informações" class="material-icons info-hover" ng-click="">info_outline</i></td>
                    <td class="center grey-text" ng-if="!e.ativo"><i tooltipped data-position="top" data-delay="150" data-tooltip="Estabelecimento Inativo" class="material-icons delete-hover" ng-click="">info</i></td>
                    <td class="center" ng-if="e.ativo"><i tooltipped data-position="top" data-delay="150" data-tooltip="Desativar" class="material-icons delete-hover" ng-click="popupAtivaEstabelecimento(e)">block</i></td>
                    <td class="center" ng-if="!e.ativo"><i tooltipped data-position="top" data-delay="150" data-tooltip="Ativar" class="material-icons activate-hover" ng-click="popupAtivaEstabelecimento(e)">done</i></td>
                  </tr>
                </tbody>
              </table>
              <div id="estabelecimentosLoader" class="progress yellow darken-2">
                <div class="indeterminate black"></div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<div id="modalAtivaEstabelecimento" class="modal">
  <form name="form" ng-submit="postAtivaEstabelecimento()">
    <div class="modal-content">
      <br>
      <h5 class="center" ng-if="!estabelecimentoData.ativo">Deseja ativar <strong>{{estabelecimentoData.nome}}</strong>?</h5>
      <h5 class="center" ng-if="estabelecimentoData.ativo">Deseja desativar <strong>{{estabelecimentoData.nome}}</strong>?</h5>
      <p class="center">Digite sua senha para confirmar:</p>
      <br>
      <div class="row">
        <div class="input-field col s6 offset-s3">
          <input ng-class="{false:'', true:'invalid'}[form.pwd.$dirty && form.pwd.$invalid]" id="pwd" type="password" name="pwd" ng-model="modal.pwd" required>
          <label for="senha">Senha</label>
        </div>
      </div>
    </div>
    <div class="modal-footer">
      <div class="row">
        <button type="submit" class="modal-action waves-effect waves-green btn-flat black-text">Confirmar</button>
        <button type="button" class="modal-action modal-close waves-effect waves-red btn-flat black-text">Cancelar</button>
      </div>
    </div>
  </form>
</div>
